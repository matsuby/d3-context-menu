!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-selection")):"function"==typeof define&&define.amd?define(["exports","d3-selection"],n):n((e=e||self).d3=e.d3||{},e.d3)}(this,function(e,v){"use strict";function n(){}function d(e){return"function"==typeof e}function m(e,n){return d(e=void 0===e?n:e)?e:function(){return e}}var s=null,b=null,x=function(){s&&(v.select(".d3-context-menu").remove(),v.select("body").on("mousedown.d3-context-menu",null,!0),s.boundCloseCallback(),s=null)};e.contextMenu=function(t,e){if("close"===t)return x();t=m(t);var o=(e=d(e)?{onOpen:e}:e||{}).onOpen||n,l=e.onClose||n,i=m(e.position),c=m(e.theme,"d3-context-menu-theme");return function(f,p){var e=this;if(x(),s={boundCloseCallback:l.bind(e,f,p)},b=v.event,v.selectAll(".d3-context-menu").data([1]).enter().append("div").attr("class","d3-context-menu "+c.bind(e)(f,p)),v.select("body").on("mousedown.d3-context-menu",x,!0),v.selectAll(".d3-context-menu").on("contextmenu",function(){x(),v.event.preventDefault(),v.event.stopPropagation()}).append("ul").call(function s(e,u){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=function(e){return m(e).call(u,f,p,b)};e.selectAll("li").data(function(e){var n=0===a?t:e.children;return r(n)}).enter().append("li").each(function(e){var n=!!r(e.divider),t=!!r(e.disabled),o=!!r(e.children),l=!!e.action,i=r(e.title),c=v.select(this).classed("is-divider",n).classed("is-disabled",t).classed("is-header",!o&&!l).classed("is-parent",o).html(n?"<hr>":i).on("click",function(){!t&&l&&(e.action.call(u,f,p,b),x())});if(o){var d=c.append("ul").classed("is-children",!0);s(d,u,++a)}})},e),!1!==o.bind(e)(f,p)){var n=i.bind(e)(f,p);v.select(".d3-context-menu").style("left",(n?n.left:v.event.pageX-2)+"px").style("top",(n?n.top:v.event.pageY-2)+"px").style("display","block"),v.event.preventDefault(),v.event.stopPropagation()}}},Object.defineProperty(e,"__esModule",{value:!0})});

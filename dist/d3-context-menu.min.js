!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-selection")):"function"==typeof define&&define.amd?define(["exports","d3-selection"],t):t((e=e||self).d3=e.d3||{},e.d3)}(this,function(e,u){"use strict";var a={noop:function(){},isFn:function(e){return"function"==typeof e},constant:function(e){return function(){return e}},toFactory:function(e,t){return e=void 0===e?t:e,a.isFn(e)?e:a.constant(e)}},s=null,p=function(){s&&(u.select(".d3-context-menu").remove(),u.select("body").on("mousedown.d3-context-menu",null),s.boundCloseCallback(),s=null)};e.contextMenu=function(t,e){if("close"===t)return p();t=a.toFactory(t);var c=(e=a.isFn(e)?{onOpen:e}:e||{}).onOpen||a.noop,d=e.onClose||a.noop,l=a.toFactory(e.position),r=a.toFactory(e.theme,"d3-context-menu-theme");return function(n,o){var i=this;if(p(),s={boundCloseCallback:d.bind(i,n,o)},u.selectAll(".d3-context-menu").data([1]).enter().append("div").attr("class","d3-context-menu "+r.bind(i)(n,o)),u.select("body").on("mousedown.d3-context-menu",p,!0),u.selectAll(".d3-context-menu").on("contextmenu",function(){p(),u.event.preventDefault(),u.event.stopPropagation()}).append("ul").selectAll("li").data(t.bind(i)(n,o)).enter().append("li").attr("class",function(e){var t="";return a.toFactory(e.divider).bind(i)(n,o)&&(t+=" is-divider"),a.toFactory(e.disabled).bind(i)(n,o)&&(t+=" is-disabled"),e.action||(t+=" is-header"),t}).html(function(e){return a.toFactory(e.divider).bind(i)(n,o)?"<hr>":(e.title||console.error("No title attribute set. Check the spelling of your options."),a.toFactory(e.title).bind(i)(n,o))}).on("click",function(e,t){a.toFactory(e.disabled).bind(i)(n,o)||e.action&&(e.action.bind(i)(n,o),p())}),!1!==c.bind(i)(n,o)){var e=l.bind(i)(n,o);u.select(".d3-context-menu").style("left",(e?e.left:u.event.pageX-2)+"px").style("top",(e?e.top:u.event.pageY-2)+"px").style("display","block"),u.event.preventDefault(),u.event.stopPropagation()}}},Object.defineProperty(e,"__esModule",{value:!0})});
